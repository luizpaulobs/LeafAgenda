@model AgendaLeaf.Models.Usuario;
@{
    ViewData["Title"] = "Cadastro de Usuário";
}

<h2>Cadastro de Usuário</h2>

<form method="post" asp-action="CadastrarUsuario" asp-controller="Login" id="cadastroForm">
    <div class="form-group">
        <label class="form-label" for="Nome">Nome:</label>
        <input class="form-control" id="Nome" name="Nome" required />
    </div>
    <div class="form-group">
        <label for="Email" class="form-label">Email:</label>
        <input type="email" id="Email" name="Email" value="@Model.Email" required class="form-control"/>
       @*  @if (!string.IsNullOrEmpty(Model.ErrorMessage))
        {
            <p style="color: red;">@Model.ErrorMessage</p>
        } *@
    </div>
    <div class="form-group">
        <label class="form-label" for="Password">Senha:</label>
        <input class="form-control" type="password" id="Senha" name="Senha" required />
    </div>
    <div class="form-group">
        <label class="form-label" for="ConfirmPassword">Confirmar Senha:</label>
        <input class="form-control" type="password" id="ConfirmSenha" name="ConfirmSenha" required />
    </div>
    <p id="passwordError" class="error" style="color: red; display: none;">As senhas não coincidem!</p>
    <button class="btn btn-success my-2" type="submit" >Cadastrar</button>
    <a href="Index" class="btn btn-link btn-sm">Voltar</a>
</form>

@* @if (Model.SuccessMessage != null)
{
    <p style="color: green;">@Model.SuccessMessage</p>
} *@
@section Scripts {
    <script>
        // Selecionar os elementos do formulário
        const form = document.getElementById('cadastroForm');
        const passwordInput = document.getElementById('Senha');
        const confirmPasswordInput = document.getElementById('ConfirmSenha');
        const passwordError = document.getElementById('passwordError');

        // Adicionar evento ao formulário para validar antes do envio
        form.addEventListener('submit', function (e) {
            // Verificar se as senhas coincidem
            if (passwordInput.value !== confirmPasswordInput.value) {
                // Exibir a mensagem de erro
                passwordError.style.display = 'block';
                e.preventDefault(); // Impedir o envio do formulário
            } else {
                // Ocultar a mensagem de erro e permitir o envio
                passwordError.style.display = 'none';
            }
        });
    </script>
    }